# Quantitative measurements in microservices systems

> アーキテクトは通常, システム要件を基にアーキテクチャ特性(イリティ, 品質特性など呼ばれ方は多くあるが, ここではアーキテクチャ特性で統一)を洗い出し, さらにこれを基にして, アーキテクチャパターンの選択をすることになる.

## 既存の研究の課題

最近の研究では, 文献からプラクティス, パターンを抽出後, 問題空間であるアーキテクチャ特性からソリューション空間であるパターンの決定を導き出す決定モデルが提唱されてきている.さらに, 実践者に対するインタビューを通して, その正確性や有効性などを確信に近づけているものもある.

しかし, これらの研究にはある程度の内部妥当性が含まれており, 定量的な測定による根拠がないものとなっている.<br>
また, この決定モデルの利用に関しても, 定量的な判断を含まない場合が多いため, このモデルの利用者にとっては, 曖昧な選択となってしまう可能性もある.

## 本研究の目的

そこで本研究では, マイクロサービスのいくつかの代表的なパターンにおけるアーキテクチャ特性ごとの定量的測定を行うこととし, 以下の実現を目的とする.

1. 意思決定の改善<br>
アーキテクチャ特性（例：スケーラビリティ、パフォーマンス、可用性、信頼性など）を定量化することで, 設計上の意思決定をデータに基づいて行うことが可能になる.これにより, 最適な構成や設計の選択を機械的に行うことができる.

1. システムの把握<br>
各特性を定量化することで, 以下のようなリソースの選択やシステムの把握に役立てることができる.

   1. コスト効率の向上<br>
   決定アーキテクチャにおけるリソース使用量(CPU, メモリ, ストレージ, ネットワーク帯域)を概算するための指標になり, 無駄なリソース使用を抑えることが可能になる.

   2. 信頼性と可用性の向上<br>
   MTBF(平均故障間隔)やMTTR(平均修復時間)などの信頼性指標を概算するための指標となり, 障害発生時の影響範囲や復旧時間を定量的に把握することで, インシデント対応の改善や冗長化の計画に役立つ.

   3. サービスの拡張性の評価<br>
   特定のサービスがどの程度スケールできるかを判断する材料となり, スループットやレイテンシなどの指標を基に, サービスが増加するトラフィックやリクエストを効率的に処理できるかを検証することで, 事前にスケーリングに関する判断がしやすくなる.

1. ただし, 今回の研究では領域を`CQRS + Event Sourcing Pattern`と`API Composition Pattern`パターンに絞っての比較を行うこととする.

## 研究方法

研究は以下に示す手順で行われるものとする.

1. [一般的に重要視されるアーキテクチャ特性を特定する.](./qa.md)
2. [`1`で特定されたアーキテクチャ特性に紐づく定量的指標を洗い出す.](./quantitative.md)
3. [`CQRS + Event Sourcing Pattern`と`API Composition + State Based Pattern`の利点, 欠点を抽出する.](./pattern.md)
4. [`2`より抽出した利点, 欠点より今回比較する上での計測するべき値, 計測方法などを考案する.](./comparison.md)
5.  [いくつかの機能を持ったマイクロサービスアプリケーションの定義する.](./system_overview.md)
6.  [`5`をもとにサービス分割を含めたシステム構成を考える.](./system_architecture.md)
7.  API Gatewayで待ち受けるREST APUの定義を行う.
8.  `6`で考案されたシステムを`CQRS + Event Sourcing Pattern`と`API Composition + State Based Pattern`の2パターンで実装する.なお, この際に`4`で洗い出された測定を行うための機能を組み込むこととする.
